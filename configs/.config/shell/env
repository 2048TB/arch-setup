#!/bin/sh
# 共享环境变量配置
# 由 .bashrc 和 .zshrc 共同引用

############################################
# 用户 PATH 配置
############################################
add_to_path() {
    case ":$PATH:" in
        *":$1:"*) ;;
        *) PATH="$1:$PATH" ;;
    esac
}

add_to_path "$HOME/.local/bin"
add_to_path "$HOME/bin"

############################################
# Cargo 环境
############################################
[ -f "$HOME/.cargo/env" ] && . "$HOME/.cargo/env"

############################################
# Go
############################################
export GOPATH="$HOME/.local/share/go"
export GOBIN="$HOME/.local/share/go/bin"
add_to_path "$GOBIN"

############################################
# Bun
############################################
export BUN_INSTALL="$HOME/.bun"
add_to_path "$BUN_INSTALL/bin"

############################################
# Rust
############################################
export CARGO_HOME="$HOME/.cargo"
export RUSTUP_HOME="$HOME/.rustup"
add_to_path "$CARGO_HOME/bin"

############################################
# Node.js / pnpm / npm
############################################
export PNPM_HOME="$HOME/.local/share/pnpm"
export NPM_CONFIG_PREFIX="$HOME/.npm-global"
add_to_path "$PNPM_HOME"
add_to_path "$NPM_CONFIG_PREFIX/bin"

############################################
# 其他环境文件
############################################
[ -f "$HOME/.local/bin/env" ] && . "$HOME/.local/bin/env"

export PATH
